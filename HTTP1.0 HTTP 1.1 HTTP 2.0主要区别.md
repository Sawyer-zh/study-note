# HTTP1.0 HTTP 1.1 HTTP 2.0主要区别

## HTTP1.0 HTTP 1.1主要区别

### 长连接

HTTP协议的长连接和短连接，**实质上是TCP协议的长连接和短连接**。

在HTTP/1.0中，默认使用的是短连接。也就是说，浏览器和服务器每进行一次HTTP操作，就建立一次连接，但任务结束就中断连接。**如果客户端浏览器访问的某个HTML或其他类型的 Web页中包含有其他的Web资源，如JavaScript文件、图像文件、CSS文件等；当浏览器每遇到这样一个Web资源，就会建立一个HTTP会话**。

使用长连接的HTTP协议，会在**响应头**有加入这行代码：

```shell
Connection:keep-alive
```

**HTTP 1.0需要使用keep-alive参数来告知服务器端要建立一个长连接**，而**HTTP1.1默认支持长连接**。

**HTTP是基于TCP/IP协议的，创建一个TCP连接是需要经过三次握手的，有一定的开销，如果每次通讯都要重新建立连接的话，对性能有影响**。因此最好能维持一个长连接，**可以用长连接来发多个请求**。

在使用长连接的情况下，当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的 TCP连接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建立的连接。Keep-Alive不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如Apache）中设定这个时间。实现长连接要客户端和服务端都支持长连接。

### 节约带宽

**HTTP 1.1支持只发送header信息**(不带任何body信息)，如果服务器认为客户端有权限请求服务器，则返回100，否则返回401。**客户端如果接受到100，才开始把请求body发送到服务器**。（起到了一个试探的作用）

这样当服务器返回401的时候，客户端就可以不用发送请求body了，节约了带宽。

**另外HTTP还支持传送内容的一部分。这样当客户端已经有一部分的资源后，只需要跟服务器请求另外的部分资源即可**。这是支持文件**断点续传的基础**。

### HOST域

现在的web server例如tomat，设置虚拟站点是非常常见的，也就是说，**web server上的多个虚拟站点可以共享同一个ip和端口**。

HTTP1.0是没有host域的，HTTP1.1才支持这个参数。

## HTTP1.1 HTTP 2.0主要区别

### 多路复用

**HTTP2.0使用了多路复用的技术，做到同一个连接并发处理多个请求**，而且并发请求的数量比HTTP1.1大了好几个数量级。

**当然HTTP1.1也可以多建立几个TCP连接，来支持处理更多并发的请求，但是创建TCP连接本身也是有开销的**。

**TCP连接有一个预热和保护的过程，先检查数据是否传送成功，一旦成功过，则慢慢加大传输速度。因此对应瞬时并发的连接，服务器的响应就会变慢。所以最好能使用一个建立好的连接，并且这个连接可以支持瞬时并发的请求**。

关于多路复用，可以参看[学习NIO](http://blog.csdn.net/linsongbin1/article/details/54865371) 。

### 数据压缩

HTTP1.1不支持header数据的压缩，HTTP2.0使用HPACK算法对header的数据进行压缩，这样数据体积小了，在网络上传输就会更快。

### 服务器推送

意思是说，当我们对支持HTTP2.0的web server请求数据的时候，**服务器会顺便把一些客户端需要的资源一起推送到客户端，免得客户端再次创建连接发送请求到服务器端获取**。这种方式非常合适加载静态资源。

服务器端推送的这些资源其实存在客户端的某处地方，客户端直接从本地加载这些资源就可以了，不用走网络，速度自然是快很多的。













